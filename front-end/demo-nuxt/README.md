# Nuxt



## ä»‹ç»

Nuxt.js æ˜¯ä¸€ä¸ªåŸºäº Vue.js çš„é«˜çº§æ¡†æ¶ï¼Œç”¨äºæ„å»ºç°ä»£ä¸”å¯Œäº¤äº’æ€§çš„ Web åº”ç”¨ã€‚å®ƒæ‰©å±•äº† Vue.js çš„åŠŸèƒ½ï¼Œæä¾›äº†æœåŠ¡å™¨æ¸²æŸ“ï¼ˆServer-Side Rendering, SSRï¼‰ã€é™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆStatic Site Generation, SSGï¼‰ç­‰åŠŸèƒ½ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿæ›´å®¹æ˜“åœ°åˆ›å»ºå¿«é€Ÿã€æ€§èƒ½ä¼˜å¼‚çš„ Web åº”ç”¨ã€‚ä¸‹é¢æ˜¯ä¸€äº›å…³äº Nuxt.js çš„å…³é”®ç‚¹ï¼š

1. **åŸºäº Vue.js**ï¼šNuxt.js æ˜¯å»ºç«‹åœ¨ Vue.js ä¹‹ä¸Šçš„ï¼Œå› æ­¤å®ƒå®Œå…¨å…¼å®¹ Vue.js çš„ç”Ÿæ€ç³»ç»Ÿå’Œç»„ä»¶åº“ã€‚å¦‚æœä½ å·²ç»ç†Ÿæ‚‰ Vue.jsï¼Œé‚£ä¹ˆä¸Šæ‰‹ Nuxt.js ä¼šéå¸¸å®¹æ˜“ã€‚
2. **æœåŠ¡å™¨æ¸²æŸ“ï¼ˆSSRï¼‰**ï¼šNuxt.js æ”¯æŒæœåŠ¡å™¨æ¸²æŸ“ï¼Œè¿™æ„å‘³ç€åœ¨æœåŠ¡å™¨ç«¯é¢„å…ˆæ¸²æŸ“é¡µé¢å†…å®¹ï¼Œç„¶åå°†å·²ç»æ¸²æŸ“å¥½çš„ HTML å‘é€åˆ°å®¢æˆ·ç«¯ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥æé«˜ SEOï¼ˆæœç´¢å¼•æ“ä¼˜åŒ–ï¼‰æ€§èƒ½ï¼Œå› ä¸ºæœç´¢å¼•æ“çˆ¬è™«å¯ä»¥ç›´æ¥æŠ“å–åˆ°é¡µé¢çš„å†…å®¹ï¼ŒåŒæ—¶ä¹Ÿå‡å°‘äº†å®¢æˆ·ç«¯çš„æ¸²æŸ“æ—¶é—´ï¼Œæé«˜äº†ç”¨æˆ·ä½“éªŒã€‚
3. **é™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆSSGï¼‰**ï¼šé™¤äº† SSRï¼ŒNuxt.js è¿˜æ”¯æŒé™æ€ç«™ç‚¹ç”Ÿæˆã€‚è¿™æ„å‘³ç€åœ¨æ„å»ºé˜¶æ®µï¼ŒNuxt.js ä¼šé¢„å…ˆç”Ÿæˆæ•´ä¸ªç½‘ç«™çš„é™æ€ HTML æ–‡ä»¶ã€‚è¿™ç§æ–¹å¼éå¸¸é€‚åˆå†…å®¹å˜åŒ–ä¸é¢‘ç¹çš„ç½‘ç«™ï¼Œå¦‚åšå®¢ã€æ–‡æ¡£ç½‘ç«™ç­‰ã€‚ç”Ÿæˆçš„é™æ€æ–‡ä»¶å¯ä»¥è¢«éƒ¨ç½²åˆ°ä»»ä½•é™æ€æ–‡ä»¶æœåŠ¡å™¨ä¸Šï¼Œå¦‚ Netlifyã€Vercel ç­‰ï¼Œä»è€Œå®ç°æé«˜çš„æ€§èƒ½å’Œå®‰å…¨æ€§ã€‚
4. **æ¨¡å—åŒ–å¼€å‘**ï¼šNuxt.js æä¾›äº†æ¨¡å—åŒ–çš„å¼€å‘æ–¹å¼ï¼Œå…è®¸å¼€å‘è€…é€šè¿‡æ·»åŠ æˆ–åˆ›å»ºæ¨¡å—æ¥æ‰©å±•åº”ç”¨çš„åŠŸèƒ½ã€‚Nuxt.js ç¤¾åŒºå’Œå®˜æ–¹éƒ½æä¾›äº†ä¸°å¯Œçš„æ¨¡å—ï¼Œå¦‚ç”¨äºèº«ä»½éªŒè¯çš„ `@nuxtjs/auth-next` æ¨¡å—ï¼Œç”¨äº PWAï¼ˆæ¸è¿›å¼ Web åº”ç”¨ï¼‰æ”¯æŒçš„ `@nuxtjs/pwa` æ¨¡å—ç­‰ã€‚
5. **è‡ªåŠ¨ä»£ç åˆ†å‰²**ï¼šNuxt.js åˆ©ç”¨äº† Webpack çš„ä»£ç åˆ†å‰²åŠŸèƒ½ï¼Œè‡ªåŠ¨å°†ä»£ç åˆ†å‰²æˆå°å—ï¼ŒæŒ‰éœ€åŠ è½½ã€‚è¿™æœ‰åŠ©äºå‡å°‘åˆå§‹åŠ è½½æ—¶é—´ï¼Œæé«˜åº”ç”¨çš„æ€§èƒ½ã€‚
6. **è·¯ç”±ç®¡ç†**ï¼šNuxt.js åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„è·¯ç”±ç®¡ç†ä½¿å¾—è·¯ç”±é…ç½®å˜å¾—éå¸¸ç®€å•ã€‚ä½ åªéœ€åœ¨ `pages` ç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„ `.vue` æ–‡ä»¶ï¼ŒNuxt.js å°±ä¼šè‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„è·¯ç”±é…ç½®ã€‚
7. **çŠ¶æ€ç®¡ç†**ï¼šè™½ç„¶ Nuxt.js ä¸å¼ºåˆ¶ä½¿ç”¨ä»»ä½•ç‰¹å®šçš„çŠ¶æ€ç®¡ç†åº“ï¼Œä½†å®ƒä¸ Vuexï¼ˆVue.js çš„å®˜æ–¹çŠ¶æ€ç®¡ç†åº“ï¼‰å®Œç¾é›†æˆã€‚ä½ å¯ä»¥è½»æ¾åœ°åœ¨ Nuxt.js åº”ç”¨ä¸­ä½¿ç”¨ Vuex æ¥ç®¡ç†åº”ç”¨çš„çŠ¶æ€ã€‚
8. **å›½é™…åŒ–æ”¯æŒ**ï¼šNuxt.js æä¾›äº†å†…ç½®çš„å›½é™…åŒ–ï¼ˆi18nï¼‰æ”¯æŒï¼Œä½¿å¾—åˆ›å»ºå¤šè¯­è¨€ç½‘ç«™å˜å¾—æ›´åŠ å®¹æ˜“ã€‚

æ€»çš„æ¥è¯´ï¼ŒNuxt.js æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”çµæ´»çš„æ¡†æ¶ï¼Œé€‚ç”¨äºæ„å»ºå„ç§ç±»å‹çš„ Web åº”ç”¨ã€‚æ— è®ºæ˜¯éœ€è¦é«˜æ€§èƒ½çš„ç”µå•†ç½‘ç«™ï¼Œè¿˜æ˜¯éœ€è¦ SEO ä¼˜åŒ–çš„åšå®¢å¹³å°ï¼ŒNuxt.js éƒ½èƒ½æä¾›å‡ºè‰²çš„è§£å†³æ–¹æ¡ˆã€‚



## Node å’Œ Nuxt CLI ç‰ˆæœ¬å…¼å®¹æ€§

- Nuxt CLI 3 å…¼å®¹ Node 14ã€16ã€18ã€19ï¼Œä½†æ˜¯æ¨èä½¿ç”¨ Node 18.xã€‚
- Nuxt CLI 2 å…¼å®¹ Node 16.xã€v20.12.2ã€‚



## å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ Nuxt CLI

>`https://www.npmjs.com/package/create-nuxt-app?activeTab=versions`

å®‰è£… 2.15.0 ç‰ˆæœ¬

```bash
sudo npm install -g create-nuxt-app@2.15.0 --registry=https://registry.npmmirror.com
```



å®‰è£…æœ€æ–°ç‰ˆæœ¬

```bash
sudo npm install -g create-nuxt-app --registry=https://registry.npmmirror.com
```



## åˆ›å»ºã€è¿è¡Œã€ç¼–è¯‘ã€å‘å¸ƒé¡¹ç›®

> è¯¦ç»†ç”¨æ³•è¯·å‚è€ƒæœ¬ç«™ [ç¤ºä¾‹](https://gitee.com/dexterleslie/demonstration/tree/master/front-end/demo-nuxt/demo-init-nuxt)



### åˆ›å»º Nuxt 2 é¡¹ç›®

å®‰è£… nuxt CLI

```bash
sudo npm install -g create-nuxt-app@2.15.0 --registry=https://registry.npmmirror.com
```

æŸ¥çœ‹ nuxt CLI ç‰ˆæœ¬

```bash
create-nuxt-app --version
```

åœ¨å½“å‰ç›®å½•åˆ›å»ºé¡¹ç›®

```bash
create-nuxt-app .
```

å¯åŠ¨é¡¹ç›®

```bash
npm run dev
```



### åˆ›å»º Nuxt 3 é¡¹ç›®

å®‰è£… nuxt CLI

```bash
sudo npm install -g create-nuxt-app@3.7.1 --registry=https://registry.npmmirror.com
```

æŸ¥çœ‹ nuxt CLI ç‰ˆæœ¬

```bash
create-nuxt-app --version
```

åœ¨å½“å‰ç›®å½•åˆ›å»ºé¡¹ç›®

```bash
create-nuxt-app .
```

é¡¹ç›®é€‰é¡¹å¦‚ä¸‹ï¼š

```bash
create-nuxt-app v3.7.1
âœ¨  Generating Nuxt.js project in .
? Project name: test1
? Programming language: JavaScript
? Package manager: Npm
? UI framework: None
? Nuxt.js modules: (Press <space> to select, <a> to toggle all, <i> to invert selection)
? Linting tools: (Press <space> to select, <a> to toggle all, <i> to invert selection)
? Testing framework: None
? Rendering mode: Universal (SSR / SSG)
? Deployment target: Server (Node.js hosting)
? Development tools: (Press <space> to select, <a> to toggle all, <i> to invert selection)
? What is your GitHub username? dexterleslie@gmail.com
? Version control system: None

ğŸ‰  Successfully created project test1

  To get started:

        npm run dev

  To build & start for production:

        npm run build
        npm run start

```

å¯åŠ¨é¡¹ç›®

```bash
npm run dev
```



### ç¼–è¯‘å’Œå‘å¸ƒé¡¹ç›®

åœ¨ç”Ÿäº§ç¯å¢ƒç¼–è¯‘å’Œå‘å¸ƒé¡¹ç›®

```bash
npm run build && npm run start
```



### å¼€å‘ç¯å¢ƒè¿è¡Œå·²æœ‰çš„é¡¹ç›®

ä¸‹è½½ç›¸å…³ä¾èµ–åŒ…æ‹¬ nuxt CLI

```sh
npm install
```

å¼€å‘æ¨¡å¼è¿è¡Œé¡¹ç›®

```sh
npm run dev
```



## Vite+Nuxt

>æé†’ï¼šå°è¯•æ ¹æ® [é“¾æ¥](https://vite.nuxtjs.org/getting-started/installation) åœ¨ Nuxt é¡¹ç›®ä¸­é…ç½® Viteï¼Œä½†å¤±è´¥ã€‚



## npm run generate å’Œ npm run buildã€npm run start åŒºåˆ«

åœ¨ Nuxt.js ä¸­ï¼Œ`npm run generate`ã€`npm run build` å’Œ `npm run start` æ˜¯ä¸‰ä¸ªå¸¸ç”¨çš„å‘½ä»¤ï¼Œå®ƒä»¬å„è‡ªç”¨äºä¸åŒçš„åœºæ™¯å’Œç›®çš„ã€‚ä»¥ä¸‹æ˜¯è¿™ä¸‰ä¸ªå‘½ä»¤çš„åŒºåˆ«ï¼š

1. npm run generate

- **ç”¨é€”**ï¼šç”¨äºæ„å»ºé™æ€ç”Ÿæˆçš„åº”ç”¨ï¼ˆStatic Site Generation, SSGï¼‰ã€‚
- **æ‰§è¡Œç»“æœ**ï¼šæ­¤å‘½ä»¤ä¼šé¢„æ¸²æŸ“æ‰€æœ‰é¡µé¢ï¼Œå¹¶ç”Ÿæˆé™æ€ HTML æ–‡ä»¶ã€‚æ‰§è¡Œåï¼Œä¼šç”Ÿæˆ `dist/` ç›®å½•ï¼Œå…¶ä¸­åŒ…å«é™æ€ç”Ÿæˆçš„åº”ç”¨çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¦‚ HTMLã€JavaScript å’Œ CSS æ–‡ä»¶ã€‚
- **æœåŠ¡å™¨ä¾èµ–**ï¼šç”Ÿæˆçš„é™æ€ç«™ç‚¹ä¸éœ€è¦ Node.js æœåŠ¡å™¨æ¥è¿è¡Œï¼Œå¯ä»¥éƒ¨ç½²åœ¨ä»»ä½•èƒ½å¤Ÿæ‰˜ç®¡é™æ€æ–‡ä»¶çš„æœåŠ¡ä¸Šï¼Œå¦‚ Netlifyã€Vercel æˆ– GitHub Pagesã€‚
- **å¸¸ç”¨åœºæ™¯**ï¼šé€‚ç”¨äºå†…å®¹ä¸ç»å¸¸æ›´æ”¹çš„ç½‘ç«™ï¼Œæˆ–å¸Œæœ›åº”ç”¨éƒ¨ç½²ç®€å•ä¸”æ²¡æœ‰æœåŠ¡å™¨ç«¯æ¸²æŸ“éœ€æ±‚çš„æƒ…å†µã€‚

2. npm run build

- **ç”¨é€”**ï¼šç”¨äºæ„å»ºæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆServer-Side Rendering, SSRï¼‰åº”ç”¨æˆ–å•é¡µé¢åº”ç”¨ï¼ˆSingle-Page Application, SPAï¼‰ã€‚
- **æ‰§è¡Œç»“æœ**ï¼šæ­¤å‘½ä»¤ä¸»è¦ç”¨äºå‡†å¤‡åº”ç”¨åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œã€‚æ‰§è¡Œåï¼Œä¼šç”Ÿæˆ `.nuxt` ç›®å½•ï¼Œå…¶ä¸­åŒ…å«ç”¨äºæœåŠ¡å™¨ç«¯æ¸²æŸ“çš„æ‰€æœ‰èµ„æºã€‚
- **æœåŠ¡å™¨ä¾èµ–**ï¼šæ„å»ºçš„ç»“æœéœ€è¦ä¸€ä¸ª Node.js æœåŠ¡å™¨æ¥è¿è¡Œï¼Œå› ä¸ºæœåŠ¡å™¨ç«¯æ¸²æŸ“çš„ç‰¹æ€§ä½¿å¾—åº”ç”¨éƒ¨åˆ†æˆ–å…¨éƒ¨é¡µé¢åœ¨æœåŠ¡å™¨ä¸Šç”Ÿæˆã€‚
- **å¸¸ç”¨åœºæ™¯**ï¼šé€‚ç”¨äºå¸Œæœ›åº”ç”¨å…·æœ‰æ›´å¥½çš„ SEO å’Œé¦–å±æ¸²æŸ“æ€§èƒ½çš„æƒ…å†µã€‚SSR åº”ç”¨éœ€è¦åç«¯æœåŠ¡å™¨æ¥å¤„ç†æ¸²æŸ“ã€‚

3. npm run start

- **ç”¨é€”**ï¼šç”¨äºå¯åŠ¨å·²ç»æ„å»ºå¥½çš„ Nuxt.js åº”ç”¨ã€‚
- **æ‰§è¡Œç»“æœ**ï¼šæ­¤å‘½ä»¤ä¼šå¯åŠ¨ä¸€ä¸ª Node.js æœåŠ¡å™¨ï¼Œå¹¶åŠ è½½ `.nuxt` ç›®å½•ä¸­çš„èµ„æºæ¥è¿è¡Œåº”ç”¨ã€‚
- **æœåŠ¡å™¨ä¾èµ–**ï¼šéœ€è¦ Node.js å’Œ npmï¼ˆæˆ– yarnï¼‰ç¯å¢ƒæ¥è¿è¡Œã€‚
- **å¸¸ç”¨åœºæ™¯**ï¼šåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ `npm run dev` å‘½ä»¤æ¥å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œå®ƒä¼šè‡ªåŠ¨ç›‘å¬æ–‡ä»¶å˜åŒ–å¹¶é‡æ–°æ„å»ºåº”ç”¨ã€‚è€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œé€šå¸¸å…ˆä½¿ç”¨ `npm run build` å‘½ä»¤æ„å»ºåº”ç”¨ï¼Œç„¶åå†ä½¿ç”¨ `npm run start` å‘½ä»¤å¯åŠ¨æœåŠ¡å™¨æ¥è¿è¡Œåº”ç”¨ã€‚

æ€»ç»“

- `npm run generate` é€‚ç”¨äºé™æ€ç«™ç‚¹ç”Ÿæˆï¼Œç”Ÿæˆçš„æ–‡ä»¶å¯ä»¥éƒ¨ç½²åœ¨ä»»ä½•èƒ½å¤Ÿæ‰˜ç®¡é™æ€æ–‡ä»¶çš„æœåŠ¡ä¸Šã€‚
- `npm run build` é€‚ç”¨äºéœ€è¦æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„åº”ç”¨ï¼ˆSSR æˆ– SPAï¼‰ï¼Œç”Ÿæˆçš„æ–‡ä»¶éœ€éƒ¨ç½²åœ¨ Node.js ç¯å¢ƒã€‚
- `npm run start` ç”¨äºå¯åŠ¨å·²ç»æ„å»ºå¥½çš„ Nuxt.js åº”ç”¨ï¼Œéœ€è¦ Node.js æœåŠ¡å™¨æ¥è¿è¡Œã€‚

æ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚å’Œéƒ¨ç½²ç¯å¢ƒï¼Œå¯ä»¥é€‰æ‹©é€‚åˆçš„å‘½ä»¤æ¥æ„å»ºå’Œå¯åŠ¨ Nuxt.js åº”ç”¨ã€‚



## é¡¹ç›®ç›®å½•ç»“æ„

Nuxt.js æ˜¯ä¸€ä¸ªåŸºäº Vue.js çš„é«˜çº§æ¡†æ¶ï¼Œç”¨äºæ„å»ºæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰æˆ–é™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆSSGï¼‰çš„åº”ç”¨ã€‚Nuxt.js æä¾›äº†ä¸€ä¸ªæ¸…æ™°ä¸”ç»„ç»‡è‰¯å¥½çš„ç›®å½•ç»“æ„ï¼Œä»¥å¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç»„ç»‡å’Œç®¡ç†é¡¹ç›®ä»£ç ã€‚ä»¥ä¸‹æ˜¯ Nuxt.js é¡¹ç›®ç›®å½•ç»“æ„çš„è¯¦ç»†è§£æï¼š

### 1. æ ¹ç›®å½•

- **`my-nuxt-project/`**ï¼šè¿™æ˜¯ä½ çš„ Nuxt.js é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œé€šå¸¸åŒ…å«é¡¹ç›®çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚

### 2. æ ¸å¿ƒç›®å½•

- **`assets/`**ï¼šç”¨äºå­˜æ”¾æœªç¼–è¯‘çš„é™æ€èµ„æºï¼Œå¦‚å›¾ç‰‡ï¼ˆ.jpg, .png ç­‰ï¼‰ã€å­—ä½“ï¼ˆ.woff, .ttf ç­‰ï¼‰å’Œæ ·å¼æ–‡ä»¶ï¼ˆå¦‚ .scss, .sass æ–‡ä»¶ï¼‰ã€‚è¿™äº›æ–‡ä»¶å¯ä»¥é€šè¿‡è·¯å¾„å¼•ç”¨æˆ–åœ¨ Vue æ–‡ä»¶ä¸­ç›´æ¥å¼•ç”¨ã€‚
- **`components/`**ï¼šç”¨äºå­˜æ”¾ Vue ç»„ä»¶ã€‚è¿™äº›ç»„ä»¶å¯ä»¥åœ¨æ•´ä¸ªé¡¹ç›®ä¸­å¤ç”¨ã€‚Nuxt.js ä¼šè‡ªåŠ¨å¯¼å…¥è¿™ä¸ªç›®å½•ä¸­çš„ä»»ä½•ç»„ä»¶ï¼ˆä»¥åŠä½ å¯èƒ½æ­£åœ¨ä½¿ç”¨çš„ä»»ä½•æ¨¡å—æ³¨å†Œçš„ç»„ä»¶ï¼‰ã€‚
- **`composables/`**ï¼ˆNuxt 3 ç‰¹æœ‰ï¼‰ï¼šç”¨äºå­˜æ”¾ Vue 3 çš„ç»„åˆå¼ API å‡½æ•°ï¼ˆå³ hooksï¼‰ã€‚è¿™äº›é¡¶çº§æ–‡ä»¶ä¼šè¢« Nuxt.js è‡ªåŠ¨å¯¼å…¥ï¼Œå¹¶åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨ã€‚
- **`content/`**ï¼ˆå¯é€‰ï¼‰ï¼šç”¨äº Nuxt Content æ¨¡å—å­˜å‚¨å†…å®¹ã€‚å¦‚æœå¯ç”¨äº† Nuxt Content æ¨¡å—ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªç›®å½•ä¸­æ”¾ç½® .mdã€.ymlã€.csv å’Œ .json æ–‡ä»¶ï¼ŒNuxt Content æ¨¡å—ä¼šè§£æè¿™äº›æ–‡ä»¶å¹¶ä¸ºä½ çš„åº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªåŸºäºæ–‡ä»¶çš„ CMSã€‚
- **`layouts/`**ï¼šç”¨äºå­˜æ”¾é¡µé¢å¸ƒå±€ç»„ä»¶ã€‚å¸ƒå±€ç»„ä»¶å®šä¹‰äº†é¡µé¢çš„æ•´ä½“ç»“æ„ï¼Œå¦‚å¤´éƒ¨ã€ä¸»ä½“å’Œåº•éƒ¨ã€‚ä½ å¯ä»¥ä¸ºä¸åŒçš„é¡µé¢æŒ‡å®šä¸åŒçš„å¸ƒå±€ã€‚
- **`middleware/`**ï¼šç”¨äºå­˜æ”¾ä¸­é—´ä»¶ã€‚ä¸­é—´ä»¶æ˜¯åœ¨å¯¼èˆªåˆ°ç‰¹å®šè·¯ç”±ä¹‹å‰è¿è¡Œçš„ä»£ç ï¼Œé€‚ç”¨äºæƒé™éªŒè¯ã€é‡å®šå‘ç­‰æ“ä½œã€‚
- **`pages/`**ï¼šç”¨äºå­˜æ”¾ Vue é¡µé¢ç»„ä»¶ã€‚Nuxt.js ä¼šè‡ªåŠ¨è¯»å–è¿™ä¸ªç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œå¹¶æ ¹æ®æ–‡ä»¶å¤¹å’Œæ–‡ä»¶åç”Ÿæˆè·¯ç”±ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ã€‚
- **`plugins/`**ï¼šç”¨äºå­˜æ”¾æ’ä»¶ã€‚æ’ä»¶ç”¨äºæ‰©å±• Nuxt.js çš„åŠŸèƒ½ï¼Œå¦‚æ³¨å†Œå…¨å±€ç»„ä»¶ã€å…¨å±€æŒ‡ä»¤æˆ–å…¨å±€æ–¹æ³•ã€‚
- **`server/`**ï¼ˆNuxt 3 ç‰¹æœ‰ï¼‰ï¼šç”¨äºå­˜æ”¾æœåŠ¡å™¨ç«¯ä»£ç ï¼Œå¦‚ API è·¯ç”±ã€æœåŠ¡ç«¯æ¸²æŸ“ç­‰ã€‚
- **`store/`**ï¼šç”¨äºå­˜æ”¾çŠ¶æ€ç®¡ç†æ–‡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨ Pinia æˆ– Vuex æ¥ç®¡ç†åº”ç”¨çš„çŠ¶æ€ã€‚

### 3. é…ç½®å’Œè„šæœ¬æ–‡ä»¶

- **`nuxt.config.ts`**ï¼šNuxt.js çš„é…ç½®æ–‡ä»¶ã€‚ä½ å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­é…ç½® Nuxt.js çš„å„ç§ç‰¹æ€§å’Œæ¨¡å—ï¼Œå¦‚è·¯ç”±ã€æ’ä»¶ã€æœåŠ¡å™¨è®¾ç½®ç­‰ã€‚
- **`package.json`**ï¼šé¡¹ç›®çš„ä¾èµ–å’Œè„šæœ¬æ–‡ä»¶ã€‚åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥å®šä¹‰é¡¹ç›®çš„ä¾èµ–ï¼ˆå¦‚ vue, nuxt ç­‰ï¼‰ï¼Œä»¥åŠæ„å»ºã€å¼€å‘æ—¶ä½¿ç”¨çš„è„šæœ¬ã€‚
- **`tsconfig.json`**ï¼ˆå¦‚æœä½¿ç”¨ TypeScriptï¼‰ï¼šTypeScript çš„é…ç½®æ–‡ä»¶ã€‚

### 4. å…¶ä»–æ–‡ä»¶

- **`.gitignore`**ï¼šGit å¿½ç•¥æ–‡ä»¶é…ç½®ã€‚è¿™ä¸ªæ–‡ä»¶æŒ‡å®šäº†å“ªäº›æ–‡ä»¶æˆ–ç›®å½•åº”è¯¥è¢« Git å¿½ç•¥ï¼Œä¸åŒ…å«åœ¨ç‰ˆæœ¬æ§åˆ¶ä¸­ã€‚
- **`public/`**ï¼šç”¨äºå­˜æ”¾é™æ€æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶ä¼šç›´æ¥æš´éœ²åœ¨æœåŠ¡å™¨ä¸Šã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªç›®å½•ä¸­æ”¾ç½® favicon.ico æˆ– robots.txt æ–‡ä»¶ã€‚

### 5. è¿è¡Œæ—¶ç”Ÿæˆçš„æ–‡ä»¶

- **`.nuxt/`**ï¼šè¿™æ˜¯ Nuxt.js åœ¨è¿è¡Œæ—¶ç”Ÿæˆçš„æ–‡ä»¶å’Œç›®å½•çš„å­˜æ”¾ä½ç½®ã€‚é€šå¸¸ï¼Œä½ ä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹è¿™ä¸ªç›®å½•ä¸­çš„å†…å®¹ã€‚
- **`.output/`**ï¼ˆç”Ÿäº§æ„å»ºæ—¶ç”Ÿæˆï¼‰ï¼šå½“ä½¿ç”¨ `npm run build` å‘½ä»¤ä¸ºç”Ÿäº§æ„å»ºåº”ç”¨ç¨‹åºæ—¶ï¼ŒNuxt.js ä¼šåˆ›å»ºè¿™ä¸ªç›®å½•æ¥å­˜æ”¾æ„å»ºåçš„æ–‡ä»¶ã€‚

### æ€»ç»“

Nuxt.js çš„ç›®å½•ç»“æ„æ¸…æ™°ä¸”æ˜“äºç†è§£ï¼Œå®ƒå¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç»„ç»‡å’Œç®¡ç†é¡¹ç›®ä»£ç ã€‚é€šè¿‡éµå¾ªè¿™ä¸ªç›®å½•ç»“æ„ï¼Œä½ å¯ä»¥ç¡®ä¿ä½ çš„é¡¹ç›®å…·æœ‰è‰¯å¥½çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚



## `Axios`

### `Nuxt` é›†æˆ `Axios` æ’ä»¶

>è¯¦ç»†ç”¨æ³•è¯·å‚è€ƒæœ¬ç«™ [ç¤ºä¾‹](https://gitee.com/dexterleslie/demonstration/tree/master/front-end/demo-nuxt/%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92%E5%92%8C%E8%B7%A8%E5%9F%9F)

æ­¥éª¤å¦‚ä¸‹ï¼š

1. è¿è¡Œ [ç¤ºä¾‹](https://gitee.com/dexterleslie/demonstration/tree/master/front-end/demo-nuxt/demo-backend-api) ä½œä¸ºæµ‹è¯•è¾…åŠ©çš„æ¥å£

2. æ·»åŠ  `@nuxtjs/axios` ä¾èµ–

   ```bash
   npm install $nuxtjs/axios --save
   ```

3. ç¼–å†™ `axios` æ’ä»¶é…ç½®è„šæœ¬ `plugins/axios.js`ï¼š

   ```javascript
   export default function ({ app, $axios, redirect, route, error }) {
       console.log(`åŠ è½½axiosè‡ªå®šä¹‰æ’ä»¶`)
   
       // è®¾ç½®axiosè¶…æ—¶è®¾ç½®
       $axios.defaults.timeout = 30000
   
       ...
   }
   ```

   

4. é…ç½® `nuxt.config.js` ä¸­ `modules` æ·»åŠ  `@nuxtjs/axios`

   ```javascript
   modules: [
   	// æ·»åŠ axios
   	'@nuxtjs/axios'
   ],
   ```

5. é…ç½® `nuxt.config.js` ä¸­ `plugins` æ·»åŠ  `axios`ï¼š

   ```javascript
   plugins: [
       // åŠ è½½axioså…¨å±€é…ç½®æ’ä»¶
       {
         src: '~/plugins/axios',
         ssr: true
       },
   ],
   ```

6. æ·»åŠ å¦‚ä¸‹é…ç½®åˆ° `nuxt.config.js` ä¸­å¯ç”¨ `axios` ä»£ç†

   ```javascript
   axios: {
       // å¯ç”¨axiosä»£ç†
       proxy: true
   },
   // åŒ¹é… /api å‰ç¼€å°±è½¬å‘åˆ° localhost:8080
   proxy: {
       '/api/': {
         target: 'http://localhost:8080',
         // å½“ changeOrigin è®¾ç½®ä¸º true æ—¶ï¼Œä»£ç†æœåŠ¡å™¨ä¼šâ€‹â€‹å°†è¯·æ±‚å¤´ä¸­çš„ Host å­—æ®µä¿®æ”¹ä¸ºç›®æ ‡æœåŠ¡å™¨ï¼ˆtargetï¼‰çš„åœ°å€â€‹â€‹ï¼Œä½¿åç«¯æœåŠ¡å™¨è®¤ä¸ºè¯·æ±‚æ˜¯ç›´æ¥æ¥è‡ªå®¢æˆ·ç«¯ï¼Œè€Œéä»£ç†æœåŠ¡å™¨
         // å‡è®¾ä½ çš„å‰ç«¯é¡¹ç›®è¿è¡Œåœ¨ http://localhost:8081ï¼Œåç«¯æ¥å£éƒ¨ç½²åœ¨ http://localhost:8080ï¼Œå‰ç«¯å‘é€è¯·æ±‚ /api/userï¼Œä»£ç†é»˜è®¤è½¬å‘åˆ° http://localhost:8080/api/userï¼Œ
         // ä½†è¯·æ±‚å¤´çš„ Host ä»ä¸º localhost:8081ï¼ˆå‰ç«¯åœ°å€ï¼‰ã€‚æ­¤æ—¶é…ç½® changeOrigin: true ä¼šæŠŠ Host ä» localhost:8081 ä¿®æ”¹ä¸º localhost:8080ã€‚
         changeOrigin: true
       }
   },
   ```




### å…¨å±€é»˜è®¤è®¾ç½®

åœ¨ `plugins/axios.js` ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š

```javascript
export default function ({ app, $axios, redirect, route, error }) {
    // è®¾ç½®axioså…¨å±€è¶…æ—¶è®¾ç½®
    $axios.defaults.timeout = 30000
}
```

 

### ä¿®æ”¹è¯·æ±‚å¤´

åœ¨ `plugins/axios.js` ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š

```javascript
export default function ({ app, $axios, redirect, route, error }) {
    // è¯·æ±‚æ—¶æ‹¦æˆªå™¨
    $axios.onRequest(function (config) {
        // æ§åˆ¶å°è¾“å‡ºï¼šaxiosè¯·æ±‚æ—¶æ‹¦æˆªï¼Œconfig={"url":"/api/v1/test1","method":"get","headers":{"common":{"Accept":"application/json, text/plain, */*"},"delete":{},"get":{},"head":{},"post":{"Content-Type":"application/x-www-form-urlencoded"},"put":{"Content-Type":"application/x-www-form-urlencoded"},"patch":{"Content-Type":"application/x-www-form-urlencoded"}},"baseURL":"/","transformRequest":[null],"transformResponse":[null],"timeout":30000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"maxBodyLength":-1,"transitional":{"silentJSONParsing":true,"forcedJSONParsing":true,"clarifyTimeoutError":false}}
        console.log(`axiosè¯·æ±‚æ—¶æ‹¦æˆªï¼Œconfig=${JSON.stringify(config)}`)

        // è¯·æ±‚å‘å‡ºå‰ä¿®æ”¹è¯·æ±‚å¤´
        config.headers.Authorization = "my token"

        return config
    })
}
```



### å¼‚å¸¸å¤„ç†

>`Nuxt2` `Axios` å¼‚å¸¸å¤„ç†åˆ†ä¸º `CSR` å’Œ `SSR` å¼‚å¸¸å¤„ç†ã€‚
>
>è¯¦ç»†ç”¨æ³•è¯·å‚è€ƒæœ¬ç«™ [ç¤ºä¾‹](https://gitee.com/dexterleslie/demonstration/tree/main/front-end/demo-nuxt/axios%E6%8B%A6%E6%88%AA%E5%99%A8%E9%85%8D%E7%BD%AE%E4%B8%8Etoken%E6%90%BA%E5%B8%A6)

`onResponse` ä¸šåŠ¡å¼‚å¸¸å¤„ç†ï¼š

```javascript
// å“åº”æ—¶æ‹¦æˆªå™¨ï¼Œcsrå’Œssréƒ½ä¼šå›è°ƒæ­¤å‡½æ•°
$axios.onResponse(function (response) {
    if (process.server) {
        // SSRæƒ…å†µ
        // httpçŠ¶æ€ç ä¸º200ï¼Œä¸šåŠ¡å¼‚å¸¸å‘ç”Ÿ
        if (response?.data?.errorCode > 0) {
            // è¿™ä¸ªæŠ›å‡ºçš„å¼‚å¸¸ä¼šè¢«ä¸‹é¢çš„$axio.onErroræ•è·å¹¶å¤„ç†
            throw new BusinessError(response.data.errorCode, response.data.errorMessage, response.data.data)
        }

        // è¿”å›ä¸šåŠ¡æ¥å£å“åº”çš„æ•°æ®ï¼Œresponseå…¶ä»–çš„ä¿¡æ¯ä¸¢å¼ƒåç»­é€»è¾‘ä¸ä¼šå†ä½¿ç”¨è¿™äº›ä¿¡æ¯
        return response.data;
    } else {
        // CSRæƒ…å†µ
        // æ§åˆ¶å°è¾“å‡ºï¼šaxioså“åº”æ—¶æ‹¦æˆªï¼Œresponse={"data":{"errorCode":0,"errorMessage":null,"data":"Nuxt apiè¿”å›æ•°æ®, token=my token"},"status":200,"statusText":"OK","headers":{"cache-control":"no-cache, no-store, max-age=0, must-revalidate","connection":"close","content-type":"application/json","date":"Thu, 10 Jul 2025 06:27:15 GMT","expires":"0","pragma":"no-cache","transfer-encoding":"chunked","x-content-type-options":"nosniff","x-frame-options":"DENY","x-my-request-id":"0431c50e-9150-488c-80d7-e913b8e37a37","x-xss-protection":"1; mode=block"},"config":{"url":"/api/v1/test1","method":"get","headers":{"Accept":"application/json, text/plain, */*","Authorization":"my token"},"baseURL":"/","transformRequest":[null],"transformResponse":[null],"timeout":30000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"maxBodyLength":-1,"transitional":{"silentJSONParsing":true,"forcedJSONParsing":true,"clarifyTimeoutError":false}},"request":{}},x-my-request-id="0431c50e-9150-488c-80d7-e913b8e37a37"
        console.log(`axioså“åº”æ—¶æ‹¦æˆªï¼Œresponse=${JSON.stringify(response)},x-my-request-id=${JSON.stringify(response.headers['x-my-request-id'])}`)

        // httpçŠ¶æ€ç ä¸º200ï¼Œä¸šåŠ¡å¼‚å¸¸å‘ç”Ÿ
        if (response?.data?.errorCode > 0) {
            // è¿™ä¸ªæŠ›å‡ºçš„å¼‚å¸¸ä¼šè¢«ä¸‹é¢çš„$axio.onErroræ•è·å¹¶å¤„ç†
            throw new BusinessError(response.data.errorCode, response.data.errorMessage, response.data.data)
        }

        // è¿”å›ä¸šåŠ¡æ¥å£å“åº”çš„æ•°æ®ï¼Œresponseå…¶ä»–çš„ä¿¡æ¯ä¸¢å¼ƒåç»­é€»è¾‘ä¸ä¼šå†ä½¿ç”¨è¿™äº›ä¿¡æ¯
        return response.data;
    }
})
```

`onError` å¼‚å¸¸å¤„ç†ï¼š

```javascript
// axioså…¨å±€é”™è¯¯å¤„ç†ï¼Œcsrå’Œssréƒ½ä¼šå›è°ƒæ­¤å‡½æ•°
$axios.onError(function (err) {
    // ååŠ©æ‰“å° err
    // console.log(`err å¯¹è±¡ ${err.response}`)

    if (process.server) {
        // SSR é”™è¯¯å¤„ç†
        // æ‰€æœ‰ SSR é”™è¯¯éƒ½éœ€è¦ç»Ÿä¸€å¤„ç†
        const responseData = err.response?.data
        const errorCode = responseData ? responseData.errorCode : 90000
        const errorMessage = responseData ? responseData.errorMessage : err.message
        const data = responseData ? responseData.data : null
        throw new BusinessError(errorCode, errorMessage, data)

        // è·³è½¬åˆ°error.vueé¡µé¢
        // return error({ errorCode: 90000, errorMessage: '888888' })
    } else {
        // CSR é”™è¯¯å¤„ç†
        const errOrigin = err
        if (!(err instanceof BusinessError)) {
            // err.response çš„æ•°æ®æ ·ä¾‹ï¼š{"data":{"errorCode":90000,"errorMessage":"æ¨¡æ‹Ÿä¸šåŠ¡å¼‚å¸¸","data":null},"status":400,"statusText":"Bad Request","headers":{"cache-control":"no-cache, no-store, max-age=0, must-revalidate","connection":"close","content-type":"application/json","date":"Thu, 10 Jul 2025 07:22:38 GMT","expires":"0","pragma":"no-cache","transfer-encoding":"chunked","x-content-type-options":"nosniff","x-frame-options":"DENY","x-my-request-id":"bd3f9310-0488-4da5-a86c-65cc7abdbc38","x-xss-protection":"1; mode=block"},"config":{"url":"/api/v1/test1?exceptionType=bizExceptionWithHttp400","method":"get","headers":{"Accept":"application/json, text/plain, */*","Authorization":"my token"},"baseURL":"/","transformRequest":[null],"transformResponse":[null],"timeout":30000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"maxBodyLength":-1,"transitional":{"silentJSONParsing":true,"forcedJSONParsing":true,"clarifyTimeoutError":false}},"request":{}}

            // è½¬æ¢ä¸º BusinessError ç±»å‹å¼‚å¸¸
            if (err.response?.data?.errorCode)
                // åç«¯æ¥å£è¿”å›çš„å¼‚å¸¸
                err = new BusinessError(err.response?.data?.errorCode, err.response?.data?.errorMessage, err.response?.data?.data)
            else
                // éåç«¯æ¥å£è¿”å›çš„å¼‚å¸¸ï¼Œä¾‹å¦‚ï¼š504ç½‘å…³è¶…æ—¶
                err = new BusinessError(90000, err.response?.statusText, null)
        }

        if (!(errOrigin?.config?.disableGlobalOnErrorHandling === true)) {
            // å®¢æˆ·ç«¯å…¨å±€å¼‚å¸¸å¤„ç†é€»è¾‘
            // æ§åˆ¶å°è¾“å‡ºï¼šaxioså…¨å±€å¼‚å¸¸å¤„ç†é€»è¾‘æ•è·å®¢æˆ·ç«¯å¼‚å¸¸ï¼Œerr={"errorCode":90000,"errorMessage":"æ¨¡æ‹Ÿä¸šåŠ¡å¼‚å¸¸","data":null}
            console.log(`axioså…¨å±€å¼‚å¸¸å¤„ç†é€»è¾‘æ•è·å®¢æˆ·ç«¯å¼‚å¸¸ï¼Œerr=${JSON.stringify(err)}`)
            app.router.app.$message.error(`axiosè°ƒç”¨å‡ºé”™: ${JSON.stringify(err)}`)
        }

        // æŠŠå¼‚å¸¸å¾€ä¸Šå±‚è°ƒç”¨è€…æŠ›å‡ºï¼Œä»¥è®©è°ƒç”¨è€…å¤„ç†
        throw err
    }
})
```

é¡µé¢ `AxiosCsrErrorHandling.vue` `Axios` `CSR` é”™è¯¯å¤„ç†ï¼š

```vue
<template>
    <div>
        <div>axios csrå’Œssré”™è¯¯å¤„ç†</div>
        <button @click="handleClick1">æ²¡æœ‰å¼‚å¸¸</button>
        <button @click="handleClick11">ä¸šåŠ¡å¼‚å¸¸å‘ç”Ÿï¼Œhttp 200</button>
        <button @click="handleClick12">ä¸šåŠ¡å¼‚å¸¸å‘ç”Ÿï¼Œhttp 400</button>
        <button @click="handleClick2">ä¸ä½¿ç”¨å®¢æˆ·ç«¯å…¨å±€å¼‚å¸¸å¤„ç†é€»è¾‘</button>
    </div>
</template>

<script>

export default {
    name: 'AxiosCsrErrorHandling',

    methods: {
        async handleClick1() {
            try {
                let response = await this.$axios.get('/api/v1/test1')
                // æ§åˆ¶å°è¾“å‡ºï¼šæ²¡æœ‰å¼‚å¸¸ï¼Œresponse={"errorCode":0,"errorMessage":null,"data":"Nuxt apiè¿”å›æ•°æ®, token=my token"}
                // console.log(`æ²¡æœ‰å¼‚å¸¸ï¼Œresponse=${JSON.stringify(response)}`)
                this.$message({ message: `æ²¡æœ‰å¼‚å¸¸ï¼Œresponse=${JSON.stringify(response)}`, type: 'success' })
            } catch (err) {
                console.log(`æœ‰å¼‚å¸¸ï¼Œerr=${JSON.stringify(err)}`)
            }
        },
        async handleClick11() {
            try {
                let response = await this.$axios.get('/api/v1/test1?exceptionType=bizExceptionWithHttp200')
                console.log(`æ²¡æœ‰å¼‚å¸¸ï¼Œresponse=${JSON.stringify(response)}`)
            } catch (err) {
                // æ§åˆ¶å°è¾“å‡ºï¼šæœ‰å¼‚å¸¸ï¼Œerr={"errorCode":90000,"errorMessage":"æ¨¡æ‹Ÿä¸šåŠ¡å¼‚å¸¸","data":null}
                console.log(`æœ‰å¼‚å¸¸ï¼Œerr=${JSON.stringify(err)}`)
            }
        },
        async handleClick12() {
            try {
                let response = await this.$axios.get('/api/v1/test1?exceptionType=bizExceptionWithHttp400')
                console.log(`æ²¡æœ‰å¼‚å¸¸ï¼Œresponse=${JSON.stringify(response)}`)
            } catch (err) {
                // æ§åˆ¶å°è¾“å‡ºï¼šæœ‰å¼‚å¸¸ï¼Œerr={"errorCode":90000,"errorMessage":"æ¨¡æ‹Ÿä¸šåŠ¡å¼‚å¸¸","data":null}
                console.log(`æœ‰å¼‚å¸¸ï¼Œerr=${JSON.stringify(err)}`)
            }
        },
        async handleClick2() {
            try {
                let response = await this.$axios.get('/api/v1/test1?exceptionType=bizExceptionWithHttp400', { disableGlobalOnErrorHandling: true })
                console.log(`æ²¡æœ‰å¼‚å¸¸ï¼Œresponse=${JSON.stringify(response)}`)
            } catch (err) {
                this.$message.error(`axiosè°ƒç”¨å‡ºé”™: ${JSON.stringify(err)}`)
            }
        }
    }
}
</script>

```

é¡µé¢ `AxiosSsrErrorHandling.vue` `Axios` `SSR` é”™è¯¯å¤„ç†ï¼š

```vue
<template>
    <div>
        <div>é¡µé¢çº§åˆ«çš„asyncDataè‡ªå®šä¹‰try catché”™è¯¯å¤„ç†</div>
        <div v-if="errorMessage">è°ƒç”¨æ¥å£ /api/v1/test1 å¤±è´¥ï¼ŒerrorCode={{ errorCode }}ï¼ŒerrorMessage={{ errorMessage }}</div>
        <div v-if="response">è°ƒç”¨æ¥å£ /api/v1/test1 æˆåŠŸï¼ŒæœåŠ¡å™¨å“åº” {{ response }}</div>
    </div>
</template>

<script>

export default {
    name: 'AxiosSsrErrorHandling',
    data() {
        return {
            errorCode: null,
            errorMessage: null,
            response: null
        }
    },
    async asyncData({ app, $axios, error }) {
        try {
            let response = await $axios.get('/api/v1/test1?exceptionType=bizExceptionWithHttp200')

            // è¿”å›çš„å¯¹è±¡ä¼šåˆå¹¶åˆ°ç»„ä»¶çš„ data ä¸­
            return {
                response: response
            }
        } catch (err) {
            // ååŠ©æ‰“å° err å¯¹è±¡
            // console.log(`err å¯¹è±¡ ${JSON.stringify(err)}`)

            // è¿”å› error è‡ªå®šä¹‰é”™è¯¯å¯¹è±¡å’Œ vue æ•°æ®åˆå¹¶
            return {
                errorCode: err.errorCode,
                errorMessage: err.errorMessage
            }

            // æ³¨æ„ï¼šè¿™æ˜¯æœåŠ¡å™¨ç«¯è°ƒç”¨axiosï¼Œelement-uiä¸ä¼šå¼¹å‡ºçª—å£
            // app.router.app.$message.error('88888')

            // è·³è½¬åˆ° error.vue é¡µé¢
            // https://stackoverflow.com/questions/56283813/nuxt-js-error-not-defined-when-trying-to-throw-404-in-failed-await-call-with
            // return error({ errorCode: err.errorCode, errorMessage: err.errorMessage })
        }
    }
}

</script>

```


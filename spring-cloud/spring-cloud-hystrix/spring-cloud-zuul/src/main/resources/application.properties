eureka.client.serviceUrl.defaultZone=http://localhost:9090/eureka/
eureka.instance.prefer-ip-address=true

spring.application.name=spring-cloud-zuul
server.port=8080

zuul.routes.user-api1.path=/api/v1/user/test1
zuul.routes.user-api1.serviceId=spring-cloud-user
zuul.routes.user-api1.stripPrefix=false

zuul.routes.user-api2.path=/api/v1/user/timeout
zuul.routes.user-api2.serviceId=spring-cloud-user
zuul.routes.user-api2.stripPrefix=false

# ribbon\u8D85\u65F6
# \u8FDE\u63A5\u8D85\u65F610\u79D2
ribbon.ConnectTimeout=10000
# \u8BFB\u53D6\u8D85\u65F610\u79D2
ribbon.ReadTimeout=10000
ribbon.MaxAutoRetries=0
ribbon.MaxAutoRetriesNextServer=0
# \u9488\u5BF9\u7279\u5B9A\u670D\u52A1\u914D\u7F6ERibbon\u8D85\u65F6
#ribbon.spring-cloud-user.ReadTimeout=15000
#ribbon.spring-cloud-user.ConnectTimeout=5000
#ribbon.spring-cloud-user.MaxAutoRetries=0
#ribbon.spring-cloud-user.MaxAutoRetriesNextServer=0

# \u5F00\u542F Feign \u5BA2\u6237\u7AEF\u7684 Hystrix \u529F\u80FD\uFF0C\u5982\u679C\u4E0D\u5F00\u542F Feign \u6CA1\u6709\u7194\u65AD\u4FDD\u62A4\u5E76\u4E14\u4E0D\u4F1A\u51FA\u53D1 Feign \u5BA2\u6237\u7AEF\u4E2D\u7684 Fallback \u56DE\u8C03
feign.hystrix.enabled=true

# \u542F\u7528 Hystrix \u547D\u4EE4\u7684\u964D\u7EA7\uFF08fallback\uFF09\u529F\u80FD\u3002\u8FD9\u4E2A\u914D\u7F6E\u51B3\u5B9A\u4E86\u5F53\u547D\u4EE4\u6267\u884C\u5931\u8D25\u3001\u8D85\u65F6\u6216\u88AB\u7194\u65AD\u65F6\uFF0C\u662F\u5426\u6267\u884C\u964D\u7EA7\u903B\u8F91
hystrix.command.default.fallback.enabled=true

# \u4FE1\u53F7\u91CF\u6A21\u5F0F\u914D\u7F6E
#hystrix.command.default.execution.isolation.strategy=SEMAPHORE
#hystrix.command.default.execution.isolation.semaphore.maxConcurrentRequests=65535
#hystrix.command.default.fallback.isolation.semaphore.maxConcurrentRequests=65535
#hystrix.command.spring-cloud-user.execution.isolation.semaphore.maxConcurrentRequests=65535
#hystrix.command.spring-cloud-user.fallback.isolation.semaphore.maxConcurrentRequests=65535

# \u7EBF\u7A0B\u9694\u79BB\u6A21\u5F0F\u914D\u7F6E
hystrix.command.default.execution.isolation.strategy=THREAD
# \u542F\u7528 Hystrix \u547D\u4EE4\u6267\u884C\u7684\u8D85\u65F6\u63A7\u5236\u529F\u80FD
# \u51B3\u5B9A hystrix.command.default.execution.isolation.thread.timeoutInMilliseconds=6000 \u914D\u7F6E\u662F\u5426\u751F\u6548
hystrix.command.default.execution.timeout.enabled=true
hystrix.command.default.execution.isolation.thread.timeoutInMilliseconds=6000
hystrix.command.default.circuitBreaker.enabled=false
hystrix.command.default.circuitBreaker.errorThresholdPercentage=50
hystrix.command.default.circuitBreaker.requestVolumeThreshold=20
hystrix.threadpool.default.coreSize=512
hystrix.threadpool.default.maximumSize=512
hystrix.threadpool.default.maxQueueSize=1024000
hystrix.threadpool.default.queueSizeRejectionThreshold=102400
hystrix.threadpool.default.allowMaximumSizeToDivergeFromCoreSize=true
hystrix.command.ApiUser#timeout(Integer).execution.isolation.thread.timeoutInMilliseconds=6000
# zuul route hystrix\u9694\u79BBThreadPool\u9ED8\u8BA4THREAD
zuul.ribbonIsolationStrategy=THREAD
# zuul route hystrix\u9694\u79BBThreadPool\u5404\u4E2A\u5FAE\u670D\u52A1\u72EC\u7ACB
# http://www.itmuch.com/spring-cloud/edgware-new-zuul-hystrix-thread-pool/
zuul.threadPool.useSeparateThreadPools=true

# \u542F\u7528actuator\u76D1\u63A7hystrix
management.server.port=9091
management.endpoints.web.exposure.include=hystrix.stream

logging.level.root=info
version: "3.1"

services:
  service:
    image: registry.cn-hangzhou.aliyuncs.com/future-public/demo-flash-sale-service
    environment:
      - JAVA_OPTS=${java_opts}
      - TZ=Asia/Shanghai
      - common_db_host=${common_db_host}
      - common_db_port=${common_db_port}
      - common_redis_cluster_nodes=${common_redis_cluster_nodes}
      - common_rocketmq_namesrvhost=${common_rocketmq_namesrvhost}
      - kafka_bootstrap_servers=${kafka_bootstrap_servers}
      - common_zookeeper_host=${common_zookeeper_host}
      - common_cassandra_contact_points=${common_cassandra_contact_points}
    logging:
      driver: json-file
      options:
        max-size: "128m"
        max-file: "10"
    restart: unless-stopped
    network_mode: host

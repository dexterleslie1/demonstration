version: "3.1"

services:
  crond:
    image: registry.cn-hangzhou.aliyuncs.com/future-public/demo-flash-sale-crond
    environment:
      - JAVA_OPTS=${java_opts}
      - TZ=Asia/Shanghai
      - common_db_host=${common_db_host}
      - common_db_port=${common_db_port}
      - common_redis_cluster_nodes=${common_redis_cluster_nodes}
      - common_rocketmq_namesrvhost=${common_rocketmq_namesrvhost}
      - kafka_bootstrap_servers=${kafka_bootstrap_servers}
      - common_zookeeper_host=${common_zookeeper_host}
      - common_cassandra_contact_points=${common_cassandra_contact_points}
      - debezium_offset_storage_file_filename=/var/lib/debezium/offset.dat
      - debezium_schema_history_internal_file_filename=/var/lib/debezium/dbhistory.dat
      - random_id_picker_host=${random_id_picker_host}
      - random_id_picker_port=${random_id_picker_port}
    volumes:
      - ./debezium:/var/lib/debezium
    logging:
      driver: json-file
      options:
        max-size: "1g"
        max-file: "2"
    restart: unless-stopped
    network_mode: host

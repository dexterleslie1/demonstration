# 云服务器（ECS）



## 镜像

### 概述

>[参考官方文档](https://help.aliyun.com/zh/ecs/user-guide/image-overview)

ECS镜像是创建ECS实例的基础模板，它包含了启动和运行实例所需的操作系统和预配置数据。创建ECS实例时必须选择一个镜像，该镜像可以只包含系统盘，也可以是系统盘和数据盘的组合，且必须和您的实例规格兼容。您可以使用阿里云或者其他开发者已经发布的镜像，也可以使用自定义镜像或者别人共享给您的镜像。本文介绍创建ECS实例时如何选择镜像、镜像的分类、使用指引等。



### 计费

>[参考官方文档](https://help.aliyun.com/zh/ecs/images)

使用自定义镜像的功能可能会产生额外快照存储费用和OSS存储及流量费用。快照默认采用按量付费。

- 使用实例创建自定义镜像时，系统默认会创建一份快照，保留自定义镜像会产生快照存储费用。
- 复制自定义镜像时，复制生成的自定义镜像会产生快照存储费用。
- 将本地镜像导入阿里云生成自定义镜像时，系统默认会创建一份快照，产生快照费用。
- 导出镜像文件会存储到OSS Bucket中，会产生OSS存储和下载的流量费用。



### 分类

使用不同类型的镜像创建实例，阿里云提供的技术支持不同，分类为：公共镜像、自定义镜像、共享镜像、云市场镜像、社区镜像。



### 自定义镜像

>[参考官方文档](https://help.aliyun.com/zh/ecs/user-guide/overview-36)

阿里云支持通过已有ECS实例或快照创建自定义镜像，还支持导入本地的自定义镜像。使用自定义镜像可以快速创建更多相同配置的实例，无需每次创建实例时重复配置。



#### 使用实例创建自定义镜像

>[参考官方文档](https://help.aliyun.com/zh/ecs/user-guide/create-a-custom-image-from-an-instance)

在批量测试环境搭建或环境克隆复制场景中，您可以通过自定义镜像大幅提升效率。创建实例后，可根据业务需求对其进行自定义配置（如安装软件、部署应用环境等），并基于更新后的实例生成自定义镜像。使用该镜像创建新实例时，所有预配置的自定义项将自动继承，从而避免重复操作。本文将详细介绍如何基于已有实例创建自定义镜像，帮助您快速实现测试环境的批量部署与高效管理。

操作步骤：

1. 创建 `ECS` 实例并安装相关软件，配置可以选择为较低的 `1C4G`，硬盘可以选择为较低的配置，硬盘大小可以选择为 `20G`（根据实际安装软件的大小调整），之后使用此镜像创建的 `ECS` 实例 `CPU`、内存、硬盘类型、硬盘大小是可以根据需求动态调整的。
2. 关闭实例后使用 `创建自定义镜像` 功能从指定的实例创建自定义镜像。
3. 创建镜像所需时间取决于实例云盘的大小，需要等待每块云盘的快照创建完成，镜像才可以使用，请您耐心等待。



#### 更新自定义镜像

>注意：本人暂时不使用此官方方法更新自定义镜像，而是使用自定义方法，步骤如下：先从镜像创建实例，在新建实例中作相关更新操作，从新建实例创建新的自定义镜像。
>
>[参考官方文档](https://help.aliyun.com/zh/ecs/user-guide/update-a-custom-image)

当您需要创建包含最新软件配置的自定义镜像时，可通过系统运维管理 OOS（CloudOps Orchestration Service）自动化生成更新后的镜像版本，用于后续ECS实例的快速部署。



## 快照

### 计费

>[参考官方文档](https://help.aliyun.com/zh/ecs/snapshots-1)

阿里云根据您使用的快照类型以及对应的快照容量，按每个地域单独结算快照费用。

通过 [链接](https://www.aliyun.com/price/product?spm=a2c4g.11186623.0.0.4ca233d20wiURm#/disk/detail/disk) 查看快照服务价格，例如：当前标准快照为￥0.12/GB/月。


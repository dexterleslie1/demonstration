## mhtml是什么？

MHTML（**MIME HTML**，全称 *Multipurpose Internet Mail Extensions HyperText Markup Language*）是一种将网页的完整内容（包括HTML、图片、CSS、JavaScript等所有资源）打包成**单个文件**的格式。它的核心目标是解决“网页离线保存”或“跨环境分享”的需求——让一个网页的所有依赖资源不再分散在多个文件中，而是被整合为一个独立的、可移植的文件。

### 一、MHTML的本质与原理

MHTML基于**MIME标准**（多用途互联网邮件扩展），最初是为电子邮件设计的（早期邮件系统难以直接发送包含图片/样式的复杂网页）。它将网页的各个组成部分（如HTML文本、图片二进制数据、CSS代码等）通过**MIME编码**（如Base64、Quoted-Printable）转换为纯文本格式，再用特定的分隔符（如`Content-Type`、`Boundary`）拼接成一个完整的文件。

简单来说：**MHTML = 网页的“完整快照”，把所有碎片资源“粘”成一个文件**。

### 二、MHTML的核心特点

1. **单文件封装**：

   传统保存网页（如“另存为Web页，全部”）会生成`.html`（主文档）+ 同名文件夹（存放图片/CSS等资源）；而MHTML将所有内容压缩到**一个文件**中（后缀通常是`.mht`或`.mhtml`，两者本质相同，只是不同浏览器的默认命名）。

2. **保留原始结构**：

   保存后的MHTML文件能完整还原网页的排版、样式和交互逻辑（只要资源本身支持离线运行，如静态图片、本地JS；动态资源如实时API请求可能无法复现）。

3. **跨平台兼容性**：

   几乎所有现代浏览器（Chrome、Edge、Firefox、Safari）都支持打开和保存MHTML文件，部分办公软件（如Microsoft Word）也能导入MHTML内容。

### 三、MHTML的常见用途

1. **离线保存网页**：

   当需要将网页永久留存（避免链接失效、服务器下线导致内容丢失）时，保存为MHTML是最佳选择之一——无需担心“图片不显示”“样式错乱”等问题。

2. **便捷分享网页**：

   向他人发送单个MHTML文件，对方无需联网即可查看完整网页，避免了发送“HTML+文件夹”的繁琐操作。

3. **归档与备份**：

   用于网站内容的归档（如学术研究、法律证据保存），确保网页状态的可追溯性。

4. **邮件嵌入网页**：

   早期邮件客户端（如Outlook）常用MHTML格式嵌入网页内容，因为邮件协议对多文件传输支持有限。

### 四、如何创建/打开MHTML文件？

#### 1. 创建MHTML文件（以浏览器为例）

- **Chrome/Edge**：打开目标网页 → 点击右上角菜单（⋮）→ 选择「另存为」→ 在“保存类型”下拉框中选择「网页，单个文件(*.mhtml)」→ 保存。
- **Firefox**：打开网页 → 菜单（☰）→「保存页面为」→ 选择「网页，单一文件(*.mhtml)」（需确保Firefox版本≥97，旧版本可能默认不支持，需安装插件如`mhtml-saver`）。
- **Safari**：打开网页 → 菜单栏「文件」→「导出为PDF」旁无直接选项？不，实际Safari可通过「文件」→「存储为」→ 选择「网页归档(*.webarchive)」？不对，纠正：Safari原生支持的是`.webarchive`格式（类似MHTML的单文件网页），但新版Safari也兼容打开`.mhtml`文件。

#### 2. 打开MHTML文件

直接用浏览器双击即可打开（浏览器会自动识别MHTML格式并渲染）；若无法打开，可右键选择「打开方式」→ 选择任意现代浏览器。

### 五、MHTML与其他网页保存格式的区别

| 格式              | 特点                                | 缺点                                       |
| ----------------- | ----------------------------------- | ------------------------------------------ |
| **MHTML(.mhtml)** | 单文件、完整保留样式/图片、离线可用 | 文件体积较大（所有资源打包）、无法编辑资源 |
| **HTML+文件夹**   | 主文档与资源分离、便于编辑资源      | 易丢失文件夹导致图片不显示、分享麻烦       |
| **PDF**           | 固定排版、适合打印/阅读             | 丢失网页交互性（如链接跳转、JS效果）       |
| **截图**          | 直观展示视觉效果                    | 无法复制文字、放大模糊、无交互性           |

### 六、注意事项

- **文件大小**：MHTML会将图片等二进制资源编码为文本（如Base64），因此文件体积通常比“HTML+文件夹”大10%-30%，不适合保存超大网页。
- **动态内容限制**：若网页依赖实时数据（如股票行情、在线视频流）或需要登录状态的资源，MHTML保存后可能无法正常显示（因为是“静态快照”）。
- **编辑难度**：MHTML是纯文本编码的打包文件，无法直接编辑其中的图片或样式（需专用工具解析后修改，再重新打包）。

总结来说，MHTML是一种**“网页完整打包器”**，核心价值是用单文件解决网页离线保存和分享的痛点，至今仍是许多场景下的最优选择之一。

## 另存为mhtml会下载整个网站吗？

**点击网址保存为MHTML的操作，只会保存「当前打开的单个网页」，而非“整个网站”**。

### 关键原因：MHTML的“单页快照”本质

MHTML的设计目标是**保存“单个网页的完整状态”**（包括该页面的HTML、图片、CSS、JS等所有依赖资源），它不具备“爬取整个网站所有页面”的能力——原因如下：

1. **MHTML仅处理“当前可视页面”**

   当你在浏览器中打开某个网址（如`https://example.com/index.html`）并选择“保存为MHTML”时，浏览器只会抓取**当前标签页加载完成的这一个页面**的资源，不会主动访问该网站的子页面（如`about.html`、`news.html`）、导航链接指向的其他页面，更不会递归爬取整个站点的所有内容。

2. **“整个网站”的定义远超单页**

   一个网站通常由多个相互关联的页面组成（主页、列表页、详情页、子栏目页等），而MHTML没有“网站结构解析”或“批量页面抓取”的功能——它不理解“网站”的概念，只认识“当前这个HTML文档及其关联资源”。

3. **浏览器/工具的限制**

   即使是浏览器的“保存网页”功能（包括MHTML），也没有内置“整站下载”的逻辑。要实现“整个网站下载”，需要专门的**网站爬虫工具**（如HTTrack、wget、Teleport Pro等），这些工具会模拟浏览器访问，递归抓取站点内的所有链接页面并保存。

### 常见误解澄清

- 误以为“保存为MHTML=下载整个网站”：本质是混淆了“单页完整保存”和“整站批量抓取”的概念。
- 误以为“链接多的网页保存后会包含其他页面”：MHTML仅包含当前页面的**直接资源引用**（如`<img src="logo.png">`这类同域下的资源），但不会跟随`<a href="other-page.html">`这样的链接去抓取`other-page.html`的内容。

### 如何真正“下载整个网站”？

如果需要离线保存整个网站（所有页面和资源），需使用**专业整站下载工具**，例如：

- **HTTrack**（免费开源）：支持Windows/macOS/Linux，可自定义抓取深度、过滤文件类型，适合个人用户。
- **wget**（命令行工具）：Linux/macOS自带，通过命令`wget --mirror --convert-links https://example.com`可镜像整个网站（需一定技术基础）。
- **WebCopy**（Windows）：可视化界面，操作简单，适合非技术用户。

这些工具的核心逻辑是**递归爬取网站的链接结构**，将所有页面及资源保存到本地，而非依赖浏览器的“单页保存”功能。

### 总结

- 保存为MHTML → 仅当前单个网页的完整快照；
- 下载整个网站 → 需要专业爬虫工具，且需遵守网站的`robots.txt`协议（尊重版权和服务器负载）。

不要期望用浏览器的“保存MHTML”功能实现整站下载——这是对MHTML功能的典型误解~